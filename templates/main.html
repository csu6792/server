<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="/static/images/menu.png">
	
	<!--<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>-->
    <!-- Bootstrap CSS -->
	<link rel="stylesheet" href="/static/css/all.css">
    <link rel="stylesheet" href="/static/css/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link href="/static/css/css/album.css" rel="stylesheet">
	<script src="static/janus.js"></script>
    <script src="static/adapter.min.js"></script>
    <script src="static/streaming.js"></script>
    <script src="static/control.js"></script>
    <script src="static/main.js"></script>
    <title>遠端系統</title>
	<style>
	.back-to-top {
    position:fixed;
    z-index:90;
    right:25px;
    bottom:25px;
    display:none;
    width:50px;
    height:50px;
    color:#fff;
    background:#33b5e5;
    line-height:50px;
    border-radius:50%;
    transition:all 0.5s;
    text-align: center;
	.back-to-top :hover{
    background:#0099CC;
    }
	</style>
  </head>

<body>
<nav class="navbar navbar-dark bg-dark">
      <a class="navbar-brand" href="#">遠端系統</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample01" aria-controls="navbarsExample01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExample01">
        <ul class="navbar-nav mr-auto">
		  <li class="nav-item dropdown">
		  <a class="nav-link" href="/logout">登出</a>
		  </li>
        </ul>
      </div>
    </nav>

<!--<div class="alert alert-danger" role="alert">
  系統測試中!
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>-->

<main role="main">
<form action="" name="">

<div class="album py-5 bg-light">
<div class="container">
<button type="button" id="product_out" class="btn btn-success my-2" name="product_out" class="float-right">啟動</button>
<button type="button" id="product_out2" class="btn btn-success my-2" name="product_out" class="float-right">左轉</button>
<button type="button" id="product_out3" class="btn btn-success my-2" name="product_out" class="float-right">右轉</button>
<button type="button" id="product_out4" class="btn btn-success my-2" name="product_out" class="float-right">後退</button>
<button type="button" id="product_out1" class="btn btn-danger my-2" name="product_out" class="float-right">停止</button>
<span class="badge rounded-pill bg-warning text-dark" id="state_1">狀態確認中</span>


<div class="spinner-border text-dark" role="status" id="state_2">
  <span class="sr-only">Loading...</span>
</div>

<h3>CPU <span class="badge badge-secondary" id="state_3" >0.00</span></h3>

<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
<div class="col-md-4">
<div class="card mb-4 box-shadow">
<div id="video_container">
      <video id="video" autoplay muted></video>
</div>
 <div id="battery_container">
   <div id="battery_out">
      <div id="battery_bar">
	<span id="battery_level"></span>
      </div>
     </div>
  </div>
<div class="card-body">
<i class="fas fa-video"></i>
<!--<button type="button" id="product_out5" class="btn btn-danger my-2" name="product_out" class="float-right">拍照</button>-->
</div>
</div>
</div>
<!--<div class="col-md-4">
<div class="card mb-4 box-shadow">
<img class="card-img-top" src="{{ url_for('video_feed', camera_type='opencv2',device=1) }}" id= "img_{{camera_number}}" width='400' height='400' alt="鏡頭未連線..">
<div class="card-body">
<i class="fas fa-video"></i>
</div>
</div>
</div>-->
</div>



</div>

<a id="back-to-top" href="#" class="btn btn-light btn-lg back-to-top" role="button"><i class="fas fa-chevron-up"></i></a>

</div>
</form>
</main>

<footer class="text-muted py-5">
  <div class="container">
    <p class="mb-1"><i class="fas fa-code"></i>設計:正修工學院</p>
  </div>
</footer>

<div class="modal fade" id="message_11" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" data-keyboard="false" data-backdrop="static">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">提示</h5>
        <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>-->
      </div>
      <div class="modal-body">
        <p id="message_data11"></p>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>





<script src="/static/js/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
<!--<script src="/static/js/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="/static/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>-->

<script>
$(document).ready(function(){
	$(window).scroll(function () {
			if ($(this).scrollTop() > 50) {
				$('#back-to-top').fadeIn();
			} else {
				$('#back-to-top').fadeOut();
			}
		});
		// scroll body to 0px on click
		$('#back-to-top').click(function () {
			$('body,html').animate({
				scrollTop: 0
			}, 400);
			return false;
		});
		
});
$(function(){

		var check_state='off';
		setInterval(function() {
		if(check_state=='ok')
			{
				//alert('ok');
				var json_data = {};
				json_data.username = 'check';
				var data= {
					data: JSON.stringify(json_data),
				}
				//$('#state_2').attr("style", 'visibility: visible');
				$.ajax({
					url:'upload_check',
					type:'POST',
					data:data,
					dataType: 'json',
					success:function(res){
						//location.reload(true);
						//location.href='/product';
						//alert(res);
						if(res=='sent')
						{
							//$("#message_data11").text('處理中......');
							//$("#message_11").modal('show');
							//$('.alert').alert();
							$('#state_1').attr('class', 'badge rounded-pill bg-success');
							$('#state_1').text('伺服器已連線');
							$('#state_2').attr("style", 'visibility: hidden');
						}
						if(res=='out')
						{
							//$('.alert').alert('close')
							//$("#message_11").modal('hide');
							$('#state_1').attr('class', 'badge rounded-pill bg-danger');
							$('#state_1').text('伺服器未連線');							
						}
						console.log(res)
						console.log(0)

					},
					error:function (res) {
						console.log(res);
						console.log(1)
					}

				})
				
			}
		}, 1000 * 5);

	     $("#product_out").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'start';
			//json_data.password = 'A1';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'upload',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);	
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
		$("#product_out1").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'stop';
			//json_data.password = 'A1';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'upload',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
		$("#product_out2").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'left';
			//json_data.password = 'A1';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'upload',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
		$("#product_out3").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'right';
			//json_data.password = 'A1';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'upload',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
		$("#product_out4").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'back';
			//json_data.password = 'A1';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'upload',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
		$("#product_out5").click(function(){			
			//json_data.password = $('#select-native').val();
			var json_data = {};
			json_data.username = 'opencv';
			json_data.password = '0';
		
            /*var data= {
                data: JSON.stringify({
                    'product1': product1,
                    'product2': product2,
					'password': password
                }),
            }*/
			var data= {
                data: JSON.stringify(json_data),
            }
			//if (confirm('確定送出?')) {
			    //$("#exampleModalCenter").modal('hide');
                $.ajax({
                url:'snapshot',
                type:'POST',
                data:data,
                dataType: 'json',
                success:function(res){
					//alert(res);
					$('#state_3').text(res);
                },
                error:function (res) {
                    console.log(res);
                    console.log(1)
                }

            })
			//}
        })
		
})
</script>
</body>